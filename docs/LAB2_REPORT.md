# Отчет по лабораторной работе №2
## Синтаксический анализ псевдокода
### Цель работы
Разработка синтаксического анализатора для учебного языка псевдокода, способного преобразовывать последовательность токенов в абстрактное синтаксическое дерево (AST) и выполнять валидацию структуры программы.

### Выполненные задачи
✅ Разработан синтаксический анализатор на Python

✅ Реализовано построение AST (Abstract Syntax Tree)

✅ Добавлена поддержка всех конструкций псевдокода

✅ Создана система валидации структуры блоков

✅ Интегрирована с лексическим анализатором из ЛР1

### Реализованные возможности
#### Синтаксические конструкции
  + Операторы присваивания
    ```pseudo
    x = 42;
    result = (a + b) * c / 2;
    ```
  + Условные операторы
    ```pseudo
    if (x > 5) {
        y = 1;
    } else {
        y = 0;
    }
    ```
  + Циклы
    ```pseudo
    // Цикл for
    for i in range(1, 10) {
        print(i);
    }
    
    // Цикл while
    while (x > 0) {
        x = x - 1;
    }
    
    // Циклы без тела
    while (condition);
    for i in range(1, 5);

  + Блоки кода
    ```pseudo
    {
        statement1;
        statement2;
    }
    ```
  + Вывод данных
    ```pseudo
    print("Hello, World!");
    print(variable);
    print("Result: " + value);
    ```
### Структура AST
#### Типы узлов AST
+ PROGRAM - корневой узел программы

+ ASSIGNMENT - оператор присваивания

+ CONDITIONAL - условный оператор

+ WHILE_LOOP - цикл while

+ FOR_LOOP - цикл for

+ OUTPUT - оператор вывода

+ BLOCK - блок кода

+ CONDITION - условие

+ VARIABLE - переменная

+ NUMBER - числовой литерал

+ STRING - строковый литерал

+ BINARY_OP - бинарная операция

#### Пример AST для программы:
```pseudo
x = 10;
if (x > 5) {
    print("Large");
}
```

```text
PROGRAM
├─ ASSIGNMENT(x)
│  └─ value:
│     ├─ NUMBER(10)
├─ CONDITIONAL
│  ├─ condition:
│  │  ├─ CONDITION
│  │  │  ├─ left:
│  │  │  │  ├─ VARIABLE(x)
│  │  │  ├─ operator: GT
│  │  │  ├─ right:
│  │  │  │  ├─ NUMBER(5)
│  ├─ then_block:
│  │  ├─ BLOCK
│  │  │  ├─ statements:
│  │  │  │  ├─ [0]:
│  │  │  │  │  ├─ OUTPUT
│  │  │  │  │  │  ├─ expression:
│  │  │  │  │  │  │  ├─ STRING('Large')
```
### Валидация структуры
#### Проверяемые условия
+ Наличие условий в условных операторах

+ Наличие переменных в присваиваниях

+ Наличие значений в присваиваниях

+ Корректность структуры циклов

+ Наличие операторов в блоках

#### Примеры валидации
```pseudo
// Корректно
if (x > 5) { y = 1; }

// Ошибка валидации - нет условия
if () { y = 1; }

// Корректно - пустой блок
if (x > 5) { }

// Корректно - цикл без тела
while (x > 0);
```
### Архитектура системы
#### Класс Parser
+ Рекурсивный спуск для разбора токенов

+ Построение иерархической структуры AST

+ Обработка ошибок синтаксиса

#### Класс ASTNode
+ Типизированные узлы с атрибутами

+ Поддержка сериализации в JSON

+ Информация о позиции (строка, столбец)

#### Класс ASTValidator
+ Рекурсивная проверка структуры AST

+ Детальные сообщения об ошибках

+ Гибкая система валидации

#### Класс PseudocodeAnalyzer
+ Интеграция лексического и синтаксического анализа

+ Унифицированный интерфейс анализа

+ Форматированный вывод результатов

### Результаты тестирования
#### Тестовое покрытие
✅ Базовые синтаксические тесты: 7/7 (100%)

✅ Тесты структуры AST: 3/3 (100%)

✅ Тесты валидации: 3/3 (100%)

✅ Интеграционные тесты: 3/3 (100%)

Общий результат
```text
🎯 ОБЩИЙ РЕЗУЛЬТАТ: 16/16 (100.0%)
🎉 ВСЕ ТЕСТЫ СИНТАКСИЧЕСКОГО АНАЛИЗАТОРА ПРОЙДЕНЫ УСПЕШНО!
Пример использования
Программный интерфейс
python
from src.analyzer import PseudocodeAnalyzer

# Создание анализатора
analyzer = PseudocodeAnalyzer()

# Анализ кода
code = """
x = 10;
if (x > 5) {
    print("Large");
}
"""
result = analyzer.analyze(code)
```
Вывод результатов
``analyzer.print_analysis_report(result)``
Вывод анализа
```text
============================================================
АНАЛИЗ ПСЕВДОКОДА
============================================================
✅ АНАЛИЗ УСПЕШЕН

📊 ЛЕКСИЧЕСКИЙ АНАЛИЗ:
   Найдено токенов: 17

🌳 АБСТРАКТНОЕ СИНТАКСИЧЕСКОЕ ДЕРЕВО (AST):
├─ PROGRAM
│  ├─ statements:
│  │  ├─ [0]:
│  │  │  ├─ ASSIGNMENT(x)
│  │  │  │  ├─ value:
│  │  │  │  │  ├─ NUMBER(10)
│  │  ├─ [1]:
│  │  │  ├─ CONDITIONAL
│  │  │  │  ├─ condition:
│  │  │  │  │  ├─ CONDITION
│  │  │  │  │  │  ├─ left:
│  │  │  │  │  │  │  ├─ VARIABLE(x)
│  │  │  │  │  │  ├─ operator: GT
│  │  │  │  │  │  ├─ right:
│  │  │  │  │  │  │  ├─ NUMBER(5)
│  │  │  │  ├─ then_block:
│  │  │  │  │  ├─ BLOCK
│  │  │  │  │  │  ├─ statements:
│  │  │  │  │  │  │  ├─ [0]:
│  │  │  │  │  │  │  │  ├─ OUTPUT
│  │  │  │  │  │  │  │  │  ├─ expression:
│  │  │  │  │  │  │  │  │  │  ├─ STRING('Large')
```
### Структура проекта
```text
009/
├── src/
│   ├── lexer.py          # Лексический анализатор (ЛР1)
│   ├── parser.py         # Синтаксический анализатор (ЛР2)
│   ├── analyzer.py       # Интегрированный анализатор
│   └── grammars/
│       └── Pseudocode.g4 # Грамматика ANTLR
├── tests/
│   ├── run_tests.py      # Тесты лексического анализатора
│   ├── run_syntax_tests.py # Тесты синтаксического анализатора
│   └── test_cases/       # Тестовые примеры
├── examples/             # Примеры программ
└── docs/
    ├── README.md
    └── LAB2_REPORT.md    # Этот отчет
```
### Вывод
Синтаксический анализатор успешно реализован и протестирован. Система корректно обрабатывает все конструкции учебного псевдокода, строит абстрактное синтаксическое дерево и выполняет валидацию структуры программы.

#### Ключевые достижения:

+ Полная поддержка грамматики псевдокода

+ Детальное построение AST с информацией о позиции

+ Надежная система валидации структуры

+ 100% покрытие тестами

+ Интеграция с лексическим анализатором
